{"ast":null,"code":"// client/src/components/QuestionForm.js\nimport React,{useState}from'react';import Question from'./Question';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function QuestionForm(_ref){let{questions,onSubmit}=_ref;const[answers,setAnswers]=useState({});const[errors,setErrors]=useState({});const[isSubmitting,setIsSubmitting]=useState(false);const handleAnswerChange=(questionId,answer)=>{setAnswers(prev=>({...prev,[questionId]:answer}));// Clear error for this question if it exists\nif(errors[questionId]){setErrors(prev=>{const newErrors={...prev};delete newErrors[questionId];return newErrors;});}};const validateForm=()=>{const newErrors={};let isValid=true;// Check required fields\nquestions.forEach(question=>{if(question.obligatorisk==='true'&&(!answers[question['@_id']]||answers[question['@_id']]==='')){newErrors[question['@_id']]='Dette felt er påkrævet';isValid=false;}});setErrors(newErrors);return isValid;};const handleSubmit=e=>{e.preventDefault();if(!validateForm()){return;}setIsSubmitting(true);onSubmit(answers);};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"question-form\",children:[questions.map(question=>/*#__PURE__*/_jsxs(\"div\",{className:\"question-container\",children:[/*#__PURE__*/_jsx(Question,{question:question,onChange:answer=>handleAnswerChange(question['@_id'],answer)}),errors[question['@_id']]&&/*#__PURE__*/_jsx(\"div\",{className:\"error-text\",children:errors[question['@_id']]})]},question['@_id'])),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-button\",disabled:isSubmitting,children:isSubmitting?'Indsender...':'Indsend besvarelser'})]});}export default QuestionForm;","map":{"version":3,"names":["React","useState","Question","jsx","_jsx","jsxs","_jsxs","QuestionForm","_ref","questions","onSubmit","answers","setAnswers","errors","setErrors","isSubmitting","setIsSubmitting","handleAnswerChange","questionId","answer","prev","newErrors","validateForm","isValid","forEach","question","obligatorisk","handleSubmit","e","preventDefault","className","children","map","onChange","type","disabled"],"sources":["Z:/Documents/IBA/webdev/sporgeskema-system/client/src/components/QuestionForm.js"],"sourcesContent":["// client/src/components/QuestionForm.js\r\nimport React, { useState } from 'react';\r\nimport Question from './Question';\r\n\r\nfunction QuestionForm({ questions, onSubmit }) {\r\n  const [answers, setAnswers] = useState({});\r\n  const [errors, setErrors] = useState({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  const handleAnswerChange = (questionId, answer) => {\r\n    setAnswers(prev => ({\r\n      ...prev,\r\n      [questionId]: answer\r\n    }));\r\n    \r\n    // Clear error for this question if it exists\r\n    if (errors[questionId]) {\r\n      setErrors(prev => {\r\n        const newErrors = { ...prev };\r\n        delete newErrors[questionId];\r\n        return newErrors;\r\n      });\r\n    }\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n    let isValid = true;\r\n    \r\n    // Check required fields\r\n    questions.forEach(question => {\r\n      if (question.obligatorisk === 'true' && (!answers[question['@_id']] || answers[question['@_id']] === '')) {\r\n        newErrors[question['@_id']] = 'Dette felt er påkrævet';\r\n        isValid = false;\r\n      }\r\n    });\r\n    \r\n    setErrors(newErrors);\r\n    return isValid;\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n    \r\n    setIsSubmitting(true);\r\n    onSubmit(answers);\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"question-form\">\r\n      {questions.map(question => (\r\n        <div key={question['@_id']} className=\"question-container\">\r\n          <Question\r\n            question={question}\r\n            onChange={(answer) => handleAnswerChange(question['@_id'], answer)}\r\n          />\r\n          \r\n          {errors[question['@_id']] && (\r\n            <div className=\"error-text\">{errors[question['@_id']]}</div>\r\n          )}\r\n        </div>\r\n      ))}\r\n      \r\n      <button \r\n        type=\"submit\" \r\n        className=\"submit-button\"\r\n        disabled={isSubmitting}\r\n      >\r\n        {isSubmitting ? 'Indsender...' : 'Indsend besvarelser'}\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default QuestionForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}