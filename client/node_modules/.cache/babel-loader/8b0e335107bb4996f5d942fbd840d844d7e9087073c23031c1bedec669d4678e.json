{"ast":null,"code":"// client/src/components/WelcomeSurvey.js\nimport React,{useState}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function WelcomeSurvey(_ref){let{sessionId,onComplete,demographicQuestions}=_ref;const[answers,setAnswers]=useState({});const[errors,setErrors]=useState({});const[isSubmitting,setIsSubmitting]=useState(false);const handleChange=(questionId,value)=>{setAnswers(prev=>({...prev,[questionId]:value}));// Clear error for this question if it exists\nif(errors[questionId]){setErrors(prev=>{const newErrors={...prev};delete newErrors[questionId];return newErrors;});}};const validateForm=()=>{const newErrors={};let isValid=true;// Check required fields\ndemographicQuestions.forEach(question=>{if(question.obligatorisk==='true'&&(!answers[question['@_id']]||answers[question['@_id']]==='')){newErrors[question['@_id']]='Dette felt er påkrævet';isValid=false;}});setErrors(newErrors);return isValid;};const handleSubmit=async e=>{e.preventDefault();if(!validateForm()){return;}setIsSubmitting(true);try{// Send demographic answers to server\nawait axios.post(`/api/survey/demographics/${sessionId}`,{answers});// Go to first website design\nonComplete();}catch(err){console.error('Fejl ved indsendelse af demografiske data:',err);setErrors({submit:'Der opstod en fejl. Prøv venligst igen.'});}finally{setIsSubmitting(false);}};const renderQuestionInput=question=>{const type=question['@_type'];switch(type){case'text':return/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:`text-input ${errors[question['@_id']]?'error-input':''}`,onChange:e=>handleChange(question['@_id'],e.target.value),required:question.obligatorisk==='true'});case'select':if(!question.options||!question.options.option){return/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:\"Ingen muligheder tilg\\xE6ngelige\"});}const options=Array.isArray(question.options.option)?question.options.option:[question.options.option];return/*#__PURE__*/_jsxs(\"select\",{className:`select-input ${errors[question['@_id']]?'error-input':''}`,onChange:e=>handleChange(question['@_id'],e.target.value),required:question.obligatorisk==='true',children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"V\\xE6lg en mulighed\"}),options.map((option,index)=>/*#__PURE__*/_jsx(\"option\",{value:option['@_value']||option,children:option['#text']||option},index))]});default:return/*#__PURE__*/_jsxs(\"p\",{className:\"error\",children:[\"Ukendt sp\\xF8rgsm\\xE5lstype: \",type]});}};return/*#__PURE__*/_jsx(\"div\",{className:\"welcome-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"welcome-content\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Velkommen til hjemmesidedesign unders\\xF8gelsen\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Denne unders\\xF8gelse handler om at evaluere forskellige hjemmesidedesigns. Du vil blive pr\\xE6senteret for tre forskellige hjemmesider og bedt om at give din mening om hver af dem.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"F\\xF8rst beder vi dig om at udfylde nogle f\\xE5 oplysninger om dig selv. Alle data behandles anonymt.\"}),errors.submit&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:errors.submit}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"demographic-form\",children:[demographicQuestions.map(question=>/*#__PURE__*/_jsxs(\"div\",{className:\"question demographic-question\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"question-label\",children:[question.text,question.obligatorisk==='true'&&/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),renderQuestionInput(question),errors[question['@_id']]&&/*#__PURE__*/_jsx(\"div\",{className:\"error-text\",children:errors[question['@_id']]})]},question['@_id'])),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-button\",disabled:isSubmitting,children:isSubmitting?'Behandler...':'Start undersøgelsen'})]})]})});}export default WelcomeSurvey;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","WelcomeSurvey","_ref","sessionId","onComplete","demographicQuestions","answers","setAnswers","errors","setErrors","isSubmitting","setIsSubmitting","handleChange","questionId","value","prev","newErrors","validateForm","isValid","forEach","question","obligatorisk","handleSubmit","e","preventDefault","post","err","console","error","submit","renderQuestionInput","type","className","onChange","target","required","options","option","children","Array","isArray","map","index","onSubmit","text","disabled"],"sources":["Z:/Documents/IBA/webdev/sporgeskema-system/client/src/components/WelcomeSurvey.js"],"sourcesContent":["// client/src/components/WelcomeSurvey.js\r\nimport React, { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction WelcomeSurvey({ sessionId, onComplete, demographicQuestions }) {\r\n  const [answers, setAnswers] = useState({});\r\n  const [errors, setErrors] = useState({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  \r\n  const handleChange = (questionId, value) => {\r\n    setAnswers(prev => ({\r\n      ...prev,\r\n      [questionId]: value\r\n    }));\r\n    \r\n    // Clear error for this question if it exists\r\n    if (errors[questionId]) {\r\n      setErrors(prev => {\r\n        const newErrors = { ...prev };\r\n        delete newErrors[questionId];\r\n        return newErrors;\r\n      });\r\n    }\r\n  };\r\n  \r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n    let isValid = true;\r\n    \r\n    // Check required fields\r\n    demographicQuestions.forEach(question => {\r\n      if (question.obligatorisk === 'true' && (!answers[question['@_id']] || answers[question['@_id']] === '')) {\r\n        newErrors[question['@_id']] = 'Dette felt er påkrævet';\r\n        isValid = false;\r\n      }\r\n    });\r\n    \r\n    setErrors(newErrors);\r\n    return isValid;\r\n  };\r\n  \r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n    \r\n    setIsSubmitting(true);\r\n    \r\n    try {\r\n      // Send demographic answers to server\r\n      await axios.post(`/api/survey/demographics/${sessionId}`, {\r\n        answers\r\n      });\r\n      \r\n      // Go to first website design\r\n      onComplete();\r\n    } catch (err) {\r\n      console.error('Fejl ved indsendelse af demografiske data:', err);\r\n      setErrors({ submit: 'Der opstod en fejl. Prøv venligst igen.' });\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n  \r\n  const renderQuestionInput = (question) => {\r\n    const type = question['@_type'];\r\n    \r\n    switch (type) {\r\n      case 'text':\r\n        return (\r\n          <input\r\n            type=\"text\"\r\n            className={`text-input ${errors[question['@_id']] ? 'error-input' : ''}`}\r\n            onChange={(e) => handleChange(question['@_id'], e.target.value)}\r\n            required={question.obligatorisk === 'true'}\r\n          />\r\n        );\r\n      \r\n      case 'select':\r\n        if (!question.options || !question.options.option) {\r\n          return <p className=\"error\">Ingen muligheder tilgængelige</p>;\r\n        }\r\n        \r\n        const options = Array.isArray(question.options.option) \r\n          ? question.options.option \r\n          : [question.options.option];\r\n          \r\n        return (\r\n          <select \r\n            className={`select-input ${errors[question['@_id']] ? 'error-input' : ''}`}\r\n            onChange={(e) => handleChange(question['@_id'], e.target.value)}\r\n            required={question.obligatorisk === 'true'}\r\n          >\r\n            <option value=\"\">Vælg en mulighed</option>\r\n            {options.map((option, index) => (\r\n              <option key={index} value={option['@_value'] || option}>\r\n                {option['#text'] || option}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        );\r\n      \r\n      default:\r\n        return <p className=\"error\">Ukendt spørgsmålstype: {type}</p>;\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <div className=\"welcome-container\">\r\n      <div className=\"welcome-content\">\r\n        <h1>Velkommen til hjemmesidedesign undersøgelsen</h1>\r\n        <p>\r\n          Denne undersøgelse handler om at evaluere forskellige hjemmesidedesigns.\r\n          Du vil blive præsenteret for tre forskellige hjemmesider og bedt om at\r\n          give din mening om hver af dem.\r\n        </p>\r\n        <p>\r\n          Først beder vi dig om at udfylde nogle få oplysninger om dig selv.\r\n          Alle data behandles anonymt.\r\n        </p>\r\n        \r\n        {errors.submit && <div className=\"error-message\">{errors.submit}</div>}\r\n        \r\n        <form onSubmit={handleSubmit} className=\"demographic-form\">\r\n          {demographicQuestions.map(question => (\r\n            <div key={question['@_id']} className=\"question demographic-question\">\r\n              <label className=\"question-label\">\r\n                {question.text}\r\n                {question.obligatorisk === 'true' && <span className=\"required\">*</span>}\r\n              </label>\r\n              \r\n              {renderQuestionInput(question)}\r\n              \r\n              {errors[question['@_id']] && (\r\n                <div className=\"error-text\">{errors[question['@_id']]}</div>\r\n              )}\r\n            </div>\r\n          ))}\r\n          \r\n          <button \r\n            type=\"submit\" \r\n            className=\"submit-button\"\r\n            disabled={isSubmitting}\r\n          >\r\n            {isSubmitting ? 'Behandler...' : 'Start undersøgelsen'}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default WelcomeSurvey;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}